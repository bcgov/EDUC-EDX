<template>
  <v-data-table
    :items="data"
    :headers="headers"
    v-model:page="pageNumber"
    v-model:items-per-page="pageSize"
    mobile-breakpoint="0"
  >
    <template #headers>
      <tr>
        <th
          v-for="column in headers"
          id="header"
          :key="column.key"
        >
          <v-row>
            <v-col class="header-text mr-12">
              {{ column.title }}
            </v-col>
          </v-row>
        </th>
      </tr>
    </template>
    <template #item="props">
      <tr
        class="mt-2"
        @click="rowclicked(props.item)"
      >
        <td
          v-for="column in headers"
          :key="column.key"
          class="pt-2 row-text"
        >
          <span v-if="column.key === 'session'">
            <span v-if="props.item['courseMonth'] === null || props.item['courseYear'] === null">-</span>
            <span v-else> {{ props.item['courseYear'] }}/{{ props.item['courseMonth'] }}</span>
          </span>
          <span v-else-if="column.key === 'status'">
                <v-icon
                  size="25"
                  :color="getIssueIconColor(props.item['studentStatusCode'])"
                >
                  {{ getIssueIcon(props.item['studentStatusCode']) }}
                </v-icon>
            </span>
          <span v-else-if="props.item[column.key]">
            {{ props.item[column.key] }}
          </span>
          <span v-else>-</span>
        </td>
      </tr>
    </template>
  </v-data-table>
</template>
        
<script>
import alertMixin from '../../mixins/alertMixin';
        
export default {
  name: 'AssessmentTable',
  components: {
  },
  mixins: [alertMixin],
  props: {
    headers: {
      type: Array,
      required: true,
      default: null
    },
    data: {
      type: Array,
      required: true,
      default: null
    }
  },
  emits: ['reload'],
  data() {
    return {
      pageNumber: 1,
      pageSize: 25
    };
  },
  computed: {
    
  },
  watch: {
      
  },
  async created() {
        
  },
  beforeUnmount() {
            
  },
  methods: {
    getIssueIcon(issue){
      switch (issue) {
      case 'ERROR':
        return 'mdi-alert-circle-outline';
      case 'WARNING':
        return 'mdi-alert-outline';
      default:
        return '';
      }
    },
    getIssueIconColor(issue){
      switch (issue) {
      case 'ERROR':
        return '#d90606';
      case 'WARNING':
        return '#2196F3';
      default:
        return '';
      }
    },
       
  }
};
</script>
        
        <style scoped>
      .header-text {
    color: #7f7f7f;
  }

  :deep(.v-table__wrapper){
         overflow: unset;
       }

       :deep(.v-data-table-footer__items-per-page) {
       display: none;
 }
  
   .row-text {
    vertical-align: text-top;
   }

        </style>
        
    
  
